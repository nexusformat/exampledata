 
import numpy as np
import datetime
import h5py
import os
 
# Note this example script was generated by nxdl_to_hdf5.py using the current 
# installed version of the NEXUS definitions ver[v2020.10] 
 
root = h5py.File('NXsnshisto.h5', 'w')

# Create the GROUPS 
 
root.create_group('entry')
root['/entry'].attrs['NX_class'] = 'NXentry'
root['/entry'].attrs['EX_required'] = 'true'
 
root['/entry/'].create_group('DASlogs')
root['/entry/DASlogs'].attrs['NX_class'] = 'NXcollection'
root['/entry/DASlogs'].attrs['EX_required'] = 'false'
 
root['/entry/DASlogs/'].create_group('log')
root['/entry/DASlogs/log'].attrs['NX_class'] = 'NXlog'
root['/entry/DASlogs/log'].attrs['EX_required'] = 'true'
 
root['/entry/DASlogs/'].create_group('positioner')
root['/entry/DASlogs/positioner'].attrs['NX_class'] = 'NXpositioner'
root['/entry/DASlogs/positioner'].attrs['EX_required'] = 'false'
 
root['/entry/'].create_group('SNSHistoTool')
root['/entry/SNSHistoTool'].attrs['NX_class'] = 'NXnote'
root['/entry/SNSHistoTool'].attrs['EX_required'] = 'false'
 
root['/entry/'].create_group('data')
root['/entry/data'].attrs['NX_class'] = 'NXdata'
root['/entry/data'].attrs['EX_required'] = 'true'
 
root['/entry/'].create_group('instrument')
root['/entry/instrument'].attrs['NX_class'] = 'NXinstrument'
root['/entry/instrument'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/'].create_group('SNS')
root['/entry/instrument/SNS'].attrs['NX_class'] = 'NXsource'
root['/entry/instrument/SNS'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/'].create_group('detector')
root['/entry/instrument/detector'].attrs['NX_class'] = 'NXdetector'
root['/entry/instrument/detector'].attrs['EX_required'] = 'true'
 
root['/entry/instrument/detector/'].create_group('origin')
root['/entry/instrument/detector/origin'].attrs['NX_class'] = 'NXgeometry'
root['/entry/instrument/detector/origin'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/detector/origin/'].create_group('orientation')
root['/entry/instrument/detector/origin/orientation'].attrs['NX_class'] = 'NXorientation'
root['/entry/instrument/detector/origin/orientation'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/detector/origin/'].create_group('shape')
root['/entry/instrument/detector/origin/shape'].attrs['NX_class'] = 'NXshape'
root['/entry/instrument/detector/origin/shape'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/detector/origin/'].create_group('translation')
root['/entry/instrument/detector/origin/translation'].attrs['NX_class'] = 'NXtranslation'
root['/entry/instrument/detector/origin/translation'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/'].create_group('NXdisk_chopper')
root['/entry/instrument/NXdisk_chopper'].attrs['NX_class'] = 'NXdisk_chopper'
root['/entry/instrument/NXdisk_chopper'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/'].create_group('NXfermi_chopper')
root['/entry/instrument/NXfermi_chopper'].attrs['NX_class'] = 'NXfermi_chopper'
root['/entry/instrument/NXfermi_chopper'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/'].create_group('moderator')
root['/entry/instrument/moderator'].attrs['NX_class'] = 'NXmoderator'
root['/entry/instrument/moderator'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/'].create_group('aperture')
root['/entry/instrument/aperture'].attrs['NX_class'] = 'NXaperture'
root['/entry/instrument/aperture'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/aperture/'].create_group('origin')
root['/entry/instrument/aperture/origin'].attrs['NX_class'] = 'NXgeometry'
root['/entry/instrument/aperture/origin'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/aperture/origin/'].create_group('orientation')
root['/entry/instrument/aperture/origin/orientation'].attrs['NX_class'] = 'NXorientation'
root['/entry/instrument/aperture/origin/orientation'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/aperture/origin/'].create_group('shape')
root['/entry/instrument/aperture/origin/shape'].attrs['NX_class'] = 'NXshape'
root['/entry/instrument/aperture/origin/shape'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/aperture/origin/'].create_group('translation')
root['/entry/instrument/aperture/origin/translation'].attrs['NX_class'] = 'NXtranslation'
root['/entry/instrument/aperture/origin/translation'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/'].create_group('attenuator')
root['/entry/instrument/attenuator'].attrs['NX_class'] = 'NXattenuator'
root['/entry/instrument/attenuator'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/'].create_group('polarizer')
root['/entry/instrument/polarizer'].attrs['NX_class'] = 'NXpolarizer'
root['/entry/instrument/polarizer'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/'].create_group('crystal')
root['/entry/instrument/crystal'].attrs['NX_class'] = 'NXcrystal'
root['/entry/instrument/crystal'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/crystal/'].create_group('origin')
root['/entry/instrument/crystal/origin'].attrs['NX_class'] = 'NXgeometry'
root['/entry/instrument/crystal/origin'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/crystal/origin/'].create_group('orientation')
root['/entry/instrument/crystal/origin/orientation'].attrs['NX_class'] = 'NXorientation'
root['/entry/instrument/crystal/origin/orientation'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/crystal/origin/'].create_group('shape')
root['/entry/instrument/crystal/origin/shape'].attrs['NX_class'] = 'NXshape'
root['/entry/instrument/crystal/origin/shape'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/crystal/origin/'].create_group('translation')
root['/entry/instrument/crystal/origin/translation'].attrs['NX_class'] = 'NXtranslation'
root['/entry/instrument/crystal/origin/translation'].attrs['EX_required'] = 'false'
 
root['/entry/'].create_group('monitor')
root['/entry/monitor'].attrs['NX_class'] = 'NXmonitor'
root['/entry/monitor'].attrs['EX_required'] = 'false'
 
root['/entry/'].create_group('sample')
root['/entry/sample'].attrs['NX_class'] = 'NXsample'
root['/entry/sample'].attrs['EX_required'] = 'false'
 
root['/entry/'].create_group('user')
root['/entry/user'].attrs['NX_class'] = 'NXuser'
root['/entry/user'].attrs['EX_required'] = 'true'

# Create the FIELDS 
 
root['/entry/DASlogs/log'].create_dataset(name='average_value', data=1.0, maxshape=None)
root['/entry/DASlogs/log/average_value'].attrs['type'] = 'NX_FLOAT'
root['/entry/DASlogs/log/average_value'].attrs['EX_required'] = 'false'
 
root['/entry/DASlogs/log'].create_dataset(name='average_value_error', data=1.0, maxshape=None)
root['/entry/DASlogs/log/average_value_error'].attrs['type'] = 'NX_FLOAT'
root['/entry/DASlogs/log/average_value_error'].attrs['EX_required'] = 'false'
 
root['/entry/DASlogs/log'].create_dataset(name='average_value_errors', data=1.0, maxshape=None)
root['/entry/DASlogs/log/average_value_errors'].attrs['type'] = 'NX_FLOAT'
root['/entry/DASlogs/log/average_value_errors'].attrs['EX_required'] = 'false'
 
root['/entry/DASlogs/log'].create_dataset(name='description', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/DASlogs/log/description'].attrs['type'] = 'NX_CHAR'
root['/entry/DASlogs/log/description'].attrs['EX_required'] = 'false'
 
root['/entry/DASlogs/log'].create_dataset(name='duration', data=1.0, maxshape=None)
root['/entry/DASlogs/log/duration'].attrs['type'] = 'NX_FLOAT'
root['/entry/DASlogs/log/duration'].attrs['EX_required'] = 'false'
 
root['/entry/DASlogs/log'].create_dataset(name='maximum_value', data=1.0, maxshape=None)
root['/entry/DASlogs/log/maximum_value'].attrs['type'] = 'NX_FLOAT'
root['/entry/DASlogs/log/maximum_value'].attrs['EX_required'] = 'false'
 
root['/entry/DASlogs/log'].create_dataset(name='minimum_value', data=1.0, maxshape=None)
root['/entry/DASlogs/log/minimum_value'].attrs['type'] = 'NX_FLOAT'
root['/entry/DASlogs/log/minimum_value'].attrs['EX_required'] = 'false'
 
root['/entry/DASlogs/log'].create_dataset(name='time', data=1.0, maxshape=None)
root['/entry/DASlogs/log/time'].attrs['type'] = 'NX_FLOAT'
root['/entry/DASlogs/log/time'].attrs['EX_required'] = 'false'
 
root['/entry/DASlogs/log'].create_dataset(name='value', data=1.0, maxshape=None)
root['/entry/DASlogs/log/value'].attrs['type'] = 'NX_FLOAT'
root['/entry/DASlogs/log/value'].attrs['EX_required'] = 'false'
 
root['/entry/DASlogs/positioner'].create_dataset(name='average_value', data=1.0, maxshape=None)
root['/entry/DASlogs/positioner/average_value'].attrs['type'] = 'NX_FLOAT'
root['/entry/DASlogs/positioner/average_value'].attrs['EX_required'] = 'false'
 
root['/entry/DASlogs/positioner'].create_dataset(name='average_value_error', data=1.0, maxshape=None)
root['/entry/DASlogs/positioner/average_value_error'].attrs['type'] = 'NX_FLOAT'
root['/entry/DASlogs/positioner/average_value_error'].attrs['EX_required'] = 'false'
 
root['/entry/DASlogs/positioner'].create_dataset(name='average_value_errors', data=1.0, maxshape=None)
root['/entry/DASlogs/positioner/average_value_errors'].attrs['type'] = 'NX_FLOAT'
root['/entry/DASlogs/positioner/average_value_errors'].attrs['EX_required'] = 'false'
 
root['/entry/DASlogs/positioner'].create_dataset(name='description', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/DASlogs/positioner/description'].attrs['type'] = 'NX_CHAR'
root['/entry/DASlogs/positioner/description'].attrs['EX_required'] = 'false'
 
root['/entry/DASlogs/positioner'].create_dataset(name='duration', data=1.0, maxshape=None)
root['/entry/DASlogs/positioner/duration'].attrs['type'] = 'NX_FLOAT'
root['/entry/DASlogs/positioner/duration'].attrs['EX_required'] = 'false'
 
root['/entry/DASlogs/positioner'].create_dataset(name='maximum_value', data=1.0, maxshape=None)
root['/entry/DASlogs/positioner/maximum_value'].attrs['type'] = 'NX_FLOAT'
root['/entry/DASlogs/positioner/maximum_value'].attrs['EX_required'] = 'false'
 
root['/entry/DASlogs/positioner'].create_dataset(name='minimum_value', data=1.0, maxshape=None)
root['/entry/DASlogs/positioner/minimum_value'].attrs['type'] = 'NX_FLOAT'
root['/entry/DASlogs/positioner/minimum_value'].attrs['EX_required'] = 'false'
 
root['/entry/DASlogs/positioner'].create_dataset(name='time', data=1.0, maxshape=None)
root['/entry/DASlogs/positioner/time'].attrs['type'] = 'NX_FLOAT'
root['/entry/DASlogs/positioner/time'].attrs['EX_required'] = 'false'
 
root['/entry/DASlogs/positioner'].create_dataset(name='value', data=1.0, maxshape=None)
root['/entry/DASlogs/positioner/value'].attrs['type'] = 'NX_FLOAT'
root['/entry/DASlogs/positioner/value'].attrs['EX_required'] = 'false'
 
root['/entry/SNSHistoTool'].create_dataset(name='SNSbanking_file_name', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/SNSHistoTool/SNSbanking_file_name'].attrs['type'] = 'NX_CHAR'
root['/entry/SNSHistoTool/SNSbanking_file_name'].attrs['EX_required'] = 'false'
 
root['/entry/SNSHistoTool'].create_dataset(name='SNSmapping_file_name', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/SNSHistoTool/SNSmapping_file_name'].attrs['type'] = 'NX_CHAR'
root['/entry/SNSHistoTool/SNSmapping_file_name'].attrs['EX_required'] = 'false'
 
root['/entry/SNSHistoTool'].create_dataset(name='author', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/SNSHistoTool/author'].attrs['type'] = 'NX_CHAR'
root['/entry/SNSHistoTool/author'].attrs['EX_required'] = 'false'
 
root['/entry/SNSHistoTool'].create_dataset(name='command1', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/SNSHistoTool/command1'].attrs['type'] = 'NX_CHAR'
root['/entry/SNSHistoTool/command1'].attrs['EX_required'] = 'false'
 
root['/entry/SNSHistoTool'].create_dataset(name='date', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/SNSHistoTool/date'].attrs['type'] = 'NX_CHAR'
root['/entry/SNSHistoTool/date'].attrs['EX_required'] = 'false'
 
root['/entry/SNSHistoTool'].create_dataset(name='description', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/SNSHistoTool/description'].attrs['type'] = 'NX_CHAR'
root['/entry/SNSHistoTool/description'].attrs['EX_required'] = 'false'
 
root['/entry/SNSHistoTool'].create_dataset(name='version', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/SNSHistoTool/version'].attrs['type'] = 'NX_CHAR'
root['/entry/SNSHistoTool/version'].attrs['EX_required'] = 'false'
 
root['/entry'].create_dataset(name='collection_identifier', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/collection_identifier'].attrs['type'] = 'NX_CHAR'
root['/entry/collection_identifier'].attrs['EX_required'] = 'false'
 
root['/entry'].create_dataset(name='collection_title', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/collection_title'].attrs['type'] = 'NX_CHAR'
root['/entry/collection_title'].attrs['EX_required'] = 'false'
 
# Valid enumeration values for root['/entry']['definition'] are: 
#	 NXsnshisto
 
root['/entry'].create_dataset(name='definition', data='NXsnshisto', maxshape=None)
root['/entry/definition'].attrs['type'] = 'NX_CHAR'
root['/entry/definition'].attrs['EX_required'] = 'false'
 
root['/entry'].create_dataset(name='duration', data=1.0, maxshape=None)
root['/entry/duration'].attrs['type'] = 'NX_FLOAT'
root['/entry/duration'].attrs['EX_required'] = 'false'
root['/entry/duration'].attrs['units'] = 'NX_TIME'
 
root['/entry'].create_dataset(name='end_time', data='2022-03-04T14:56:25.264424', maxshape=None)
root['/entry/end_time'].attrs['type'] = 'NX_DATE_TIME'
root['/entry/end_time'].attrs['EX_required'] = 'false'
 
root['/entry'].create_dataset(name='entry_identifier', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/entry_identifier'].attrs['type'] = 'NX_CHAR'
root['/entry/entry_identifier'].attrs['EX_required'] = 'false'
 
root['/entry'].create_dataset(name='experiment_identifier', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/experiment_identifier'].attrs['type'] = 'NX_CHAR'
root['/entry/experiment_identifier'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/SNS'].create_dataset(name='frequency', data=1.0, maxshape=None)
root['/entry/instrument/SNS/frequency'].attrs['type'] = 'NX_FLOAT'
root['/entry/instrument/SNS/frequency'].attrs['EX_required'] = 'false'
root['/entry/instrument/SNS/frequency'].attrs['units'] = 'NX_FREQUENCY'
 
root['/entry/instrument/SNS'].create_dataset(name='name', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/instrument/SNS/name'].attrs['type'] = 'NX_CHAR'
root['/entry/instrument/SNS/name'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/SNS'].create_dataset(name='probe', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/instrument/SNS/probe'].attrs['type'] = 'NX_CHAR'
root['/entry/instrument/SNS/probe'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/SNS'].create_dataset(name='type', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/instrument/SNS/type'].attrs['type'] = 'NX_CHAR'
root['/entry/instrument/SNS/type'].attrs['EX_required'] = 'false'
 
root['/entry/instrument'].create_dataset(name='SNSdetector_calibration_id', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/instrument/SNSdetector_calibration_id'].attrs['type'] = 'NX_CHAR'
root['/entry/instrument/SNSdetector_calibration_id'].attrs['EX_required'] = 'false'
 
root['/entry/instrument'].create_dataset(name='SNSgeometry_file_name', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/instrument/SNSgeometry_file_name'].attrs['type'] = 'NX_CHAR'
root['/entry/instrument/SNSgeometry_file_name'].attrs['EX_required'] = 'false'
 
root['/entry/instrument'].create_dataset(name='SNStranslation_service', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/instrument/SNStranslation_service'].attrs['type'] = 'NX_CHAR'
root['/entry/instrument/SNStranslation_service'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/detector'].create_dataset(name='azimuthal_angle', data=1.0, maxshape=None)
root['/entry/instrument/detector/azimuthal_angle'].attrs['type'] = 'NX_FLOAT'
root['/entry/instrument/detector/azimuthal_angle'].attrs['EX_required'] = 'false'
root['/entry/instrument/detector/azimuthal_angle'].attrs['units'] = 'NX_ANGLE'
 
root['/entry/instrument/detector'].create_dataset(name='data', data=np.ushort(1), maxshape=None)
root['/entry/instrument/detector/data'].attrs['type'] = 'NX_UINT'
root['/entry/instrument/detector/data'].attrs['EX_required'] = 'false'
root['/entry/instrument/detector/data'].attrs['axes'] = 'x_pixel_offset,y_pixel_offset,time_of_flight'
root['/entry/instrument/detector/data'].attrs['signal'] = '1'
 
root['/entry/instrument/detector'].create_dataset(name='data_x_time_of_flight', data=np.ushort(1), maxshape=None)
root['/entry/instrument/detector/data_x_time_of_flight'].attrs['type'] = 'NX_UINT'
root['/entry/instrument/detector/data_x_time_of_flight'].attrs['EX_required'] = 'false'
root['/entry/instrument/detector/data_x_time_of_flight'].attrs['axes'] = 'x_pixel_offset,time_of_flight'
root['/entry/instrument/detector/data_x_time_of_flight'].attrs['signal'] = '3'
 
root['/entry/instrument/detector'].create_dataset(name='data_x_y', data=np.ushort(1), maxshape=None)
root['/entry/instrument/detector/data_x_y'].attrs['type'] = 'NX_UINT'
root['/entry/instrument/detector/data_x_y'].attrs['EX_required'] = 'false'
root['/entry/instrument/detector/data_x_y'].attrs['axes'] = 'x_pixel_offset,y_pixel_offset'
root['/entry/instrument/detector/data_x_y'].attrs['signal'] = '2'
 
root['/entry/instrument/detector'].create_dataset(name='data_y_time_of_flight', data=np.ushort(1), maxshape=None)
root['/entry/instrument/detector/data_y_time_of_flight'].attrs['type'] = 'NX_UINT'
root['/entry/instrument/detector/data_y_time_of_flight'].attrs['EX_required'] = 'false'
root['/entry/instrument/detector/data_y_time_of_flight'].attrs['axes'] = 'y_pixel_offset,time_of_flight'
root['/entry/instrument/detector/data_y_time_of_flight'].attrs['signal'] = '4'
 
root['/entry/instrument/detector'].create_dataset(name='distance', data=1.0, maxshape=None)
root['/entry/instrument/detector/distance'].attrs['type'] = 'NX_FLOAT'
root['/entry/instrument/detector/distance'].attrs['EX_required'] = 'false'
root['/entry/instrument/detector/distance'].attrs['units'] = 'NX_LENGTH'
 
root['/entry/instrument/detector/origin/orientation'].create_dataset(name='value', data=1.0, maxshape=None)
root['/entry/instrument/detector/origin/orientation/value'].attrs['type'] = 'NX_FLOAT'
root['/entry/instrument/detector/origin/orientation/value'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/detector/origin/shape'].create_dataset(name='description', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/instrument/detector/origin/shape/description'].attrs['type'] = 'NX_CHAR'
root['/entry/instrument/detector/origin/shape/description'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/detector/origin/shape'].create_dataset(name='shape', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/instrument/detector/origin/shape/shape'].attrs['type'] = 'NX_CHAR'
root['/entry/instrument/detector/origin/shape/shape'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/detector/origin/shape'].create_dataset(name='size', data=1.0, maxshape=None)
root['/entry/instrument/detector/origin/shape/size'].attrs['type'] = 'NX_FLOAT'
root['/entry/instrument/detector/origin/shape/size'].attrs['EX_required'] = 'false'
root['/entry/instrument/detector/origin/shape/size'].attrs['units'] = 'NX_LENGTH'
 
root['/entry/instrument/detector/origin/translation'].create_dataset(name='distance', data=1.0, maxshape=None)
root['/entry/instrument/detector/origin/translation/distance'].attrs['type'] = 'NX_FLOAT'
root['/entry/instrument/detector/origin/translation/distance'].attrs['EX_required'] = 'false'
root['/entry/instrument/detector/origin/translation/distance'].attrs['units'] = 'NX_LENGTH'
 
root['/entry/instrument/detector'].create_dataset(name='pixel_id', data=np.ushort(1), maxshape=None)
root['/entry/instrument/detector/pixel_id'].attrs['type'] = 'NX_UINT'
root['/entry/instrument/detector/pixel_id'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/detector'].create_dataset(name='polar_angle', data=1.0, maxshape=None)
root['/entry/instrument/detector/polar_angle'].attrs['type'] = 'NX_FLOAT'
root['/entry/instrument/detector/polar_angle'].attrs['EX_required'] = 'false'
root['/entry/instrument/detector/polar_angle'].attrs['units'] = 'NX_ANGLE'
 
root['/entry/instrument/detector'].create_dataset(name='time_of_flight', data=1.0, maxshape=None)
root['/entry/instrument/detector/time_of_flight'].attrs['type'] = 'NX_FLOAT'
root['/entry/instrument/detector/time_of_flight'].attrs['EX_required'] = 'false'
root['/entry/instrument/detector/time_of_flight'].attrs['axis'] = '3'
root['/entry/instrument/detector/time_of_flight'].attrs['primary'] = '1'
root['/entry/instrument/detector/time_of_flight'].attrs['units'] = 'NX_TIME_OF_FLIGHT'
 
root['/entry/instrument/detector'].create_dataset(name='total_counts', data=np.ushort(1), maxshape=None)
root['/entry/instrument/detector/total_counts'].attrs['type'] = 'NX_UINT'
root['/entry/instrument/detector/total_counts'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/detector'].create_dataset(name='x_pixel_offset', data=1.0, maxshape=None)
root['/entry/instrument/detector/x_pixel_offset'].attrs['type'] = 'NX_FLOAT'
root['/entry/instrument/detector/x_pixel_offset'].attrs['EX_required'] = 'false'
root['/entry/instrument/detector/x_pixel_offset'].attrs['axis'] = '1'
root['/entry/instrument/detector/x_pixel_offset'].attrs['primary'] = '1'
root['/entry/instrument/detector/x_pixel_offset'].attrs['units'] = 'NX_LENGTH'
 
root['/entry/instrument/detector'].create_dataset(name='y_pixel_offset', data=1.0, maxshape=None)
root['/entry/instrument/detector/y_pixel_offset'].attrs['type'] = 'NX_FLOAT'
root['/entry/instrument/detector/y_pixel_offset'].attrs['EX_required'] = 'false'
root['/entry/instrument/detector/y_pixel_offset'].attrs['axis'] = '2'
root['/entry/instrument/detector/y_pixel_offset'].attrs['primary'] = '1'
root['/entry/instrument/detector/y_pixel_offset'].attrs['units'] = 'NX_LENGTH'
 
root['/entry/instrument'].create_dataset(name='beamline', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/instrument/beamline'].attrs['type'] = 'NX_CHAR'
root['/entry/instrument/beamline'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/NXdisk_chopper'].create_dataset(name='distance', data=1.0, maxshape=None)
root['/entry/instrument/NXdisk_chopper/distance'].attrs['type'] = 'NX_FLOAT'
root['/entry/instrument/NXdisk_chopper/distance'].attrs['EX_required'] = 'false'
root['/entry/instrument/NXdisk_chopper/distance'].attrs['units'] = 'NX_LENGTH'
 
root['/entry/instrument/NXfermi_chopper'].create_dataset(name='distance', data=1.0, maxshape=None)
root['/entry/instrument/NXfermi_chopper/distance'].attrs['type'] = 'NX_FLOAT'
root['/entry/instrument/NXfermi_chopper/distance'].attrs['EX_required'] = 'false'
root['/entry/instrument/NXfermi_chopper/distance'].attrs['units'] = 'NX_LENGTH'
 
root['/entry/instrument/moderator'].create_dataset(name='coupling_material', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/instrument/moderator/coupling_material'].attrs['type'] = 'NX_CHAR'
root['/entry/instrument/moderator/coupling_material'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/moderator'].create_dataset(name='distance', data=1.0, maxshape=None)
root['/entry/instrument/moderator/distance'].attrs['type'] = 'NX_FLOAT'
root['/entry/instrument/moderator/distance'].attrs['EX_required'] = 'false'
root['/entry/instrument/moderator/distance'].attrs['units'] = 'NX_LENGTH'
 
root['/entry/instrument/moderator'].create_dataset(name='temperature', data=1.0, maxshape=None)
root['/entry/instrument/moderator/temperature'].attrs['type'] = 'NX_FLOAT'
root['/entry/instrument/moderator/temperature'].attrs['EX_required'] = 'false'
root['/entry/instrument/moderator/temperature'].attrs['units'] = 'NX_TEMPERATURE'
 
root['/entry/instrument/moderator'].create_dataset(name='type', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/instrument/moderator/type'].attrs['type'] = 'NX_CHAR'
root['/entry/instrument/moderator/type'].attrs['EX_required'] = 'false'
 
root['/entry/instrument'].create_dataset(name='name', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/instrument/name'].attrs['type'] = 'NX_CHAR'
root['/entry/instrument/name'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/aperture/origin/orientation'].create_dataset(name='value', data=1.0, maxshape=None)
root['/entry/instrument/aperture/origin/orientation/value'].attrs['type'] = 'NX_FLOAT'
root['/entry/instrument/aperture/origin/orientation/value'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/aperture/origin/shape'].create_dataset(name='description', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/instrument/aperture/origin/shape/description'].attrs['type'] = 'NX_CHAR'
root['/entry/instrument/aperture/origin/shape/description'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/aperture/origin/shape'].create_dataset(name='shape', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/instrument/aperture/origin/shape/shape'].attrs['type'] = 'NX_CHAR'
root['/entry/instrument/aperture/origin/shape/shape'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/aperture/origin/shape'].create_dataset(name='size', data=1.0, maxshape=None)
root['/entry/instrument/aperture/origin/shape/size'].attrs['type'] = 'NX_FLOAT'
root['/entry/instrument/aperture/origin/shape/size'].attrs['EX_required'] = 'false'
root['/entry/instrument/aperture/origin/shape/size'].attrs['units'] = 'NX_LENGTH'
 
root['/entry/instrument/aperture/origin/translation'].create_dataset(name='distance', data=1.0, maxshape=None)
root['/entry/instrument/aperture/origin/translation/distance'].attrs['type'] = 'NX_FLOAT'
root['/entry/instrument/aperture/origin/translation/distance'].attrs['EX_required'] = 'false'
root['/entry/instrument/aperture/origin/translation/distance'].attrs['units'] = 'NX_LENGTH'
 
root['/entry/instrument/aperture'].create_dataset(name='x_pixel_offset', data=1.0, maxshape=None)
root['/entry/instrument/aperture/x_pixel_offset'].attrs['type'] = 'NX_FLOAT'
root['/entry/instrument/aperture/x_pixel_offset'].attrs['EX_required'] = 'false'
root['/entry/instrument/aperture/x_pixel_offset'].attrs['units'] = 'NX_LENGTH'
 
root['/entry/instrument/attenuator'].create_dataset(name='distance', data=1.0, maxshape=None)
root['/entry/instrument/attenuator/distance'].attrs['type'] = 'NX_FLOAT'
root['/entry/instrument/attenuator/distance'].attrs['EX_required'] = 'false'
root['/entry/instrument/attenuator/distance'].attrs['units'] = 'NX_LENGTH'
 
root['/entry/instrument/crystal/origin'].create_dataset(name='description', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/instrument/crystal/origin/description'].attrs['type'] = 'NX_CHAR'
root['/entry/instrument/crystal/origin/description'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/crystal/origin/orientation'].create_dataset(name='value', data=1.0, maxshape=None)
root['/entry/instrument/crystal/origin/orientation/value'].attrs['type'] = 'NX_FLOAT'
root['/entry/instrument/crystal/origin/orientation/value'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/crystal/origin/shape'].create_dataset(name='description', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/instrument/crystal/origin/shape/description'].attrs['type'] = 'NX_CHAR'
root['/entry/instrument/crystal/origin/shape/description'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/crystal/origin/shape'].create_dataset(name='shape', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/instrument/crystal/origin/shape/shape'].attrs['type'] = 'NX_CHAR'
root['/entry/instrument/crystal/origin/shape/shape'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/crystal/origin/shape'].create_dataset(name='size', data=1.0, maxshape=None)
root['/entry/instrument/crystal/origin/shape/size'].attrs['type'] = 'NX_FLOAT'
root['/entry/instrument/crystal/origin/shape/size'].attrs['EX_required'] = 'false'
root['/entry/instrument/crystal/origin/shape/size'].attrs['units'] = 'NX_LENGTH'
 
root['/entry/instrument/crystal/origin/translation'].create_dataset(name='distance', data=1.0, maxshape=None)
root['/entry/instrument/crystal/origin/translation/distance'].attrs['type'] = 'NX_FLOAT'
root['/entry/instrument/crystal/origin/translation/distance'].attrs['EX_required'] = 'false'
root['/entry/instrument/crystal/origin/translation/distance'].attrs['units'] = 'NX_LENGTH'
 
root['/entry/instrument/crystal'].create_dataset(name='type', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/instrument/crystal/type'].attrs['type'] = 'NX_CHAR'
root['/entry/instrument/crystal/type'].attrs['EX_required'] = 'false'
 
root['/entry/instrument/crystal'].create_dataset(name='wavelength', data=1.0, maxshape=None)
root['/entry/instrument/crystal/wavelength'].attrs['type'] = 'NX_FLOAT'
root['/entry/instrument/crystal/wavelength'].attrs['EX_required'] = 'false'
root['/entry/instrument/crystal/wavelength'].attrs['units'] = 'NX_WAVELENGTH'
 
root['/entry/monitor'].create_dataset(name='data', data=np.ushort(1), maxshape=None)
root['/entry/monitor/data'].attrs['type'] = 'NX_UINT'
root['/entry/monitor/data'].attrs['EX_required'] = 'false'
root['/entry/monitor/data'].attrs['axes'] = 'time_of_flight'
root['/entry/monitor/data'].attrs['signal'] = '1'
 
root['/entry/monitor'].create_dataset(name='distance', data=1.0, maxshape=None)
root['/entry/monitor/distance'].attrs['type'] = 'NX_FLOAT'
root['/entry/monitor/distance'].attrs['EX_required'] = 'false'
root['/entry/monitor/distance'].attrs['units'] = 'NX_LENGTH'
 
root['/entry/monitor'].create_dataset(name='mode', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/monitor/mode'].attrs['type'] = 'NX_CHAR'
root['/entry/monitor/mode'].attrs['EX_required'] = 'false'
 
root['/entry/monitor'].create_dataset(name='time_of_flight', data=1.0, maxshape=None)
root['/entry/monitor/time_of_flight'].attrs['type'] = 'NX_FLOAT'
root['/entry/monitor/time_of_flight'].attrs['EX_required'] = 'false'
root['/entry/monitor/time_of_flight'].attrs['units'] = 'NX_TIME'
 
root['/entry'].create_dataset(name='notes', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/notes'].attrs['type'] = 'NX_CHAR'
root['/entry/notes'].attrs['EX_required'] = 'false'
 
root['/entry'].create_dataset(name='proton_charge', data=1.0, maxshape=None)
root['/entry/proton_charge'].attrs['type'] = 'NX_FLOAT'
root['/entry/proton_charge'].attrs['EX_required'] = 'false'
root['/entry/proton_charge'].attrs['units'] = 'NX_CHARGE'
 
root['/entry'].create_dataset(name='raw_frames', data=1, maxshape=None)
root['/entry/raw_frames'].attrs['type'] = 'NX_INT'
root['/entry/raw_frames'].attrs['EX_required'] = 'false'
 
root['/entry'].create_dataset(name='run_number', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/run_number'].attrs['type'] = 'NX_CHAR'
root['/entry/run_number'].attrs['EX_required'] = 'false'
 
root['/entry/sample'].create_dataset(name='changer_position', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/sample/changer_position'].attrs['type'] = 'NX_CHAR'
root['/entry/sample/changer_position'].attrs['EX_required'] = 'false'
 
root['/entry/sample'].create_dataset(name='holder', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/sample/holder'].attrs['type'] = 'NX_CHAR'
root['/entry/sample/holder'].attrs['EX_required'] = 'false'
 
root['/entry/sample'].create_dataset(name='identifier', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/sample/identifier'].attrs['type'] = 'NX_CHAR'
root['/entry/sample/identifier'].attrs['EX_required'] = 'false'
 
root['/entry/sample'].create_dataset(name='name', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/sample/name'].attrs['type'] = 'NX_CHAR'
root['/entry/sample/name'].attrs['EX_required'] = 'false'
 
root['/entry/sample'].create_dataset(name='nature', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/sample/nature'].attrs['type'] = 'NX_CHAR'
root['/entry/sample/nature'].attrs['EX_required'] = 'false'
 
root['/entry'].create_dataset(name='start_time', data='2022-03-04T14:56:25.358149', maxshape=None)
root['/entry/start_time'].attrs['type'] = 'NX_DATE_TIME'
root['/entry/start_time'].attrs['EX_required'] = 'false'
 
root['/entry'].create_dataset(name='title', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/title'].attrs['type'] = 'NX_CHAR'
root['/entry/title'].attrs['EX_required'] = 'false'
 
root['/entry'].create_dataset(name='total_counts', data=np.ushort(1), maxshape=None)
root['/entry/total_counts'].attrs['type'] = 'NX_UINT'
root['/entry/total_counts'].attrs['EX_required'] = 'false'
root['/entry/total_counts'].attrs['units'] = 'NX_UNITLESS'
 
root['/entry'].create_dataset(name='total_uncounted_counts', data=np.ushort(1), maxshape=None)
root['/entry/total_uncounted_counts'].attrs['type'] = 'NX_UINT'
root['/entry/total_uncounted_counts'].attrs['EX_required'] = 'false'
root['/entry/total_uncounted_counts'].attrs['units'] = 'NX_UNITLESS'
 
root['/entry/user'].create_dataset(name='facility_user_id', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/user/facility_user_id'].attrs['type'] = 'NX_CHAR'
root['/entry/user/facility_user_id'].attrs['EX_required'] = 'false'
 
root['/entry/user'].create_dataset(name='name', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/user/name'].attrs['type'] = 'NX_CHAR'
root['/entry/user/name'].attrs['EX_required'] = 'false'
 
root['/entry/user'].create_dataset(name='role', data='SAMPLE-CHAR-DATA', maxshape=None)
root['/entry/user/role'].attrs['type'] = 'NX_CHAR'
root['/entry/user/role'].attrs['EX_required'] = 'false'

# Create the LINKS 
root['/entry/data/data'] = h5py.SoftLink('/entry/instrument/detector/data')
root['/entry/data/data/'].attrs['target'] = '/entry/instrument/detector/data'

# Create the LINKS 
root['/entry/data/data_x_time_of_flight'] = h5py.SoftLink('/entry/instrument/detector/data_x_time_of_flight')
root['/entry/data/data_x_time_of_flight/'].attrs['target'] = '/entry/instrument/detector/data_x_time_of_flight'

# Create the LINKS 
root['/entry/data/data_x_y'] = h5py.SoftLink('/entry/instrument/detector/data_x_y')
root['/entry/data/data_x_y/'].attrs['target'] = '/entry/instrument/detector/data_x_y'

# Create the LINKS 
root['/entry/data/data_y_time_of_flight'] = h5py.SoftLink('/entry/instrument/detector/data_y_time_of_flight')
root['/entry/data/data_y_time_of_flight/'].attrs['target'] = '/entry/instrument/detector/data_y_time_of_flight'

# Create the LINKS 
root['/entry/data/pixel_id'] = h5py.SoftLink('/entry/instrument/detector/pixel_id')
root['/entry/data/pixel_id/'].attrs['target'] = '/entry/instrument/detector/pixel_id'

# Create the LINKS 
root['/entry/data/time_of_flight'] = h5py.SoftLink('/entry/instrument/detector/time_of_flight')
root['/entry/data/time_of_flight/'].attrs['target'] = '/entry/instrument/detector/time_of_flight'

# Create the LINKS 
root['/entry/data/total_counts'] = h5py.SoftLink('/entry/instrument/detector/total_counts')
root['/entry/data/total_counts/'].attrs['target'] = '/entry/instrument/detector/total_counts'

# Create the LINKS 
root['/entry/data/x_pixel_offset'] = h5py.SoftLink('/entry/instrument/detector/x_pixel_offset')
root['/entry/data/x_pixel_offset/'].attrs['target'] = '/entry/instrument/detector/x_pixel_offset'

# Create the LINKS 
root['/entry/data/y_pixel_offset'] = h5py.SoftLink('/entry/instrument/detector/y_pixel_offset')
root['/entry/data/y_pixel_offset/'].attrs['target'] = '/entry/instrument/detector/y_pixel_offset'

# Create the DOC strings 
root['/entry/DASlogs'].attrs['EX_doc'] = 'Details of all logs, both from cvinfo file and from HistoTool (frequency and proton_charge). '
root['/entry/DASlogs/positioner'].attrs['EX_doc'] = 'Motor logs from cvinfo file. '
root['/entry/SNSHistoTool/command1'].attrs['EX_doc'] = 'Command string for event2histo_nxl. '
root['/entry/definition'].attrs['EX_doc'] = 'Official NXDL schema after this file goes to applications. '
root['/entry/instrument/SNSdetector_calibration_id'].attrs['EX_doc'] = 'Detector calibration id from DAS. '
root['/entry/instrument/detector/origin/orientation/value'].attrs['EX_doc'] = 'Six out of nine rotation parameters. '
root['/entry/instrument/NXdisk_chopper'].attrs['EX_doc'] = 'Original specification called for NXchopper, which is not a valid NeXus base class. Select either NXdisk_chopper or NXfermi_chopper, as appropriate. '
root['/entry/instrument/NXfermi_chopper'].attrs['EX_doc'] = 'Original specification called for NXchopper, which is not a valid NeXus base class. Select either NXdisk_chopper or NXfermi_chopper, as appropriate. '
root['/entry/instrument/aperture/origin/orientation/value'].attrs['EX_doc'] = 'Six out of nine rotation parameters. '
root['/entry/instrument/crystal/origin/orientation/value'].attrs['EX_doc'] = 'Six out of nine rotation parameters. '
root['/entry/sample/name'].attrs['EX_doc'] = 'Descriptive name of sample '
 

# Create the ATTRIBUTES 
root['/'].attrs['default'] = 'entry'
root['/entry'].attrs['default'] = 'data'
root['/entry/data'].attrs['signal'] = 'data'
root['/entry/data/data'].attrs['signal'] = '1'
root.attrs['file_name'] = os.path.abspath('NXsnshisto')
root.attrs['file_time'] = datetime.datetime.now().isoformat()
root.attrs['h5py_version'] = h5py.version.version
root.attrs['HDF5_Version'] = h5py.version.hdf5_version

# Close the file
root.close()


